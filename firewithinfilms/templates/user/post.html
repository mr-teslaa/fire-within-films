{% extends 'root.html' %} 

<!-- inject code in HEAD TAG -->
{% block head %} 
<link 
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" 
    rel="stylesheet" 
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" 
    crossorigin="anonymous"
>
{% endblock %}


{% block content %}
<!-- <div class="container">
	<article class="">
		<div class="img__banner-container">
			<img 
				src="{{ image_file }}"
				alt="Cover image for {{ post.title }}"
				class="article__img"
			/>
		</div>

		<section class="article__description">
			<div class="article__title-container">
				<h1 class="article__title"> {{ post.title }} </h1>
			</div>

			<div class="article__content-container">
				<p class="article__content"> {{ post.content }} </p>
			</div>

			<!-- {% if post.author == current_user %}
			<h2>you are real user </h2>
			<a
				class="btn btn-secondary btn-sm mt-1 mb-1"
				href="{{ url_for('users.user_update_post', post_id=post.id) }}"
			> Update </a>

			<form
				action="{{ url_for('users.user_delete_post', post_id=post.id) }}"
				method="POST"
			>
				<input
					class="btn btn-danger"
					type="submit"
					value="Delete"
				/>
			</form>
			
			{% else %}
			<h2>sorry dude, its anyone else's post</h2>
			{% endif %} -->

		<!-- </section>
	</article>
	<aside class="card">
		<div class="card__header flex flex-j-start">
			<div class="card__header-img-container mx-1">
				<img 
					src="{{ url_for('static', filename='profile_pics/' + current_user.image_file) }}" 
					class="avatar"
					alt="" 
				/>
			</div>

			<div class="card__header-title-container">
				<p class="card__header-title">
					{{ current_user.name }}
				</p>
			</div>
		</div>
	</aside>
</div> --> 
<header class="mb-3">
	{% include "helpers/_post_nav.html" %}
</header>

<main class="container">
	<div class="row g-5 mb-5">
		<div class="col-md-8">
			{% if image_file_status != False %}
			<div>
				<img 
					src="{{ image_file }}"
					alt="Cover image for {{ post.title }}" 
					class="img-fluid"
				/>
			</div>
			{% endif %}

			<article class="blog-post">
				<h1 class="blog-post-title mb-1"> {{ post.title }}  </h1>
				<p class="blog-post-meta">
					{{ post.date_posted.strftime('%d %b, %Y') }} by
					<a href="#">{{ post.author.name }}</a>
				</p>

				<p> {{ post.content | safe }} </p>
				<hr>
			</article>
			
			<nav class="blog-pagination d-flex justify-content-between" aria-label="Pagination">
				{% if post.id !=1 %}
				<a  
					href="{{ url_for('users.user_post', post_id=post.id-1) }}" 
					class="btn btn-outline-dark rounded-pill">
					Previouse Post
				</a>
				{% else %}
				<a  href="#" class="btn btn-outline-dark rounded-pill">
					Previouse Post
				</a>			
				{% endif %}

				<a  
					href="{{ url_for('users.user_post', post_id=post.id+1) }}" 
					class="btn btn-warning rounded-pill">
					Next Post
				</a>
			</nav>

			<ol class="list-unstyled my-5">
				<h4 class="text-dark mb-3 text-bold">
					Read more from FireWithinFilms
				</h4>
				{% for suggest_post in suggest_post_author %}
				<li>
					<a href="#">
						<div class="more__post d-flex align-items-center gap-2">
							<div style="width: 60px;">
								<img 
								class="avatar"
								src="{{ url_for('static', filename='profile_pics/' + suggest_post.author.image_file) }}" 
								alt=""
							>
							</div>
							
							<div class="pb-2">
								<p class="mb-1 ">{{ suggest_post.title }}</p>
								<small class="text-muted">By <a href="#" class="text-muted" style="text-decoration: underline;">{{ suggest_post.author.name }}</a></small>
							</div>
						</div>
					</a>
				</li>
				{% endfor %}
			</ol>
		</div>

		<div class="col-md-4">
			<div class="position-sticky" style="top: 2rem;">
				<div class="p-4 mb-3 bg-light rounded">
					<div class="card__header flex flex-j-start flex-a-center">
						<div class="card__header-img-container mx-1">
							<img 
								src="{{ url_for('static', filename='profile_pics/' + current_user.image_file) }}" 
								class="avatar"
								alt="" 
							/>
						</div>

						<div class="card__header-title-container ms-3">
							<h4 class="card__header-title">
								{{ post.author.name }}
							</h4>
						</div>
					</div>

					<p class="mb-0 mt-3">
						{{ post_author_details[0].description }}
					</p>

					<p class="my-2 text-dark"> Joined 2020</p>

					<div class="d-grid">
						<button class="btn btn-warning mt-2">Visit Profile</button>
					</div>

				</div>

				<div class="p-4">
					<h5 class="text-dark mb-3">More from 
						<span class="text-warning"> {{ post.author.name }}</span> 
					</h5>

					<ol class="list-unstyled mb-2">
						{% for author_post in author_all_post %}
							<li>
								<a href="{{ url_for('users.user_post', post_id=author_post.id) }}">
									<div class="more__post">
										<p>{{ author_post.title }}</p>
									</div>
								</a>
							</li>
						{% endfor %}
					</ol>

					<!-- <ol class="list-unstyled mb-2">
						{% for suggest_post in suggest_post_author %}
							<li>
								<a href="#">
									<div class="more__post">
										<p>{{ suggest_post.title }}</p>
									</div>
								</a>
							</li>
						{% endfor %}
					</ol> -->
				</div>
			</div>
		</div>
	</div>
</main>

{% include 'helpers/_dashboard_footer.html' %}

{% endblock content %}
